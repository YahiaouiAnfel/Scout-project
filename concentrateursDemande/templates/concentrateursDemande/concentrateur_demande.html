{% extends "layouts/base.html" %}

{% load crispy_forms_tags %}

{% block content %}
<!-- Modal -->
<div class="modal fade" id="myModalHorizontal1" tabindex="-1" role="dialog" aria-labelledby="myModalLabel1" aria-hidden="true" style="font-size: 0.6em">
    <div class="modal-dialog">
         <div class="modal-content">
            <!-- Modal Header -->
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">&times;</span>
                    <span class="sr-only">Close</span>
                </button>
                <h5 class="modal-title" class="slds-text-heading_medium slds-hyphenate" id="myModalLabel1" >
                </h5>
            </div>

            <!-- Modal Body -->
            <div class="modal-body">
                <div class="text-center">
                    <h2 class="section-heading text-uppercase">تسليم مكثف</h2>
                </div>
                <form method="post" novalidate>
                    {% csrf_token %}                      
                    <div class="peer pX-40 " style="background-color: white">
                        <div class="row text-center">
                            <div class="col-md-12">
                                <div class="form-group ">
                                    {{ form.demande|as_crispy_field}}
                                </div>
                                <div class="form-group ">
                                    {{ form.concentrateur|as_crispy_field}}
                                </div>
                                <div class="form-group ">
                                    {{ form.date|as_crispy_field}}
                                </div>
                            </div>
                        </div>
                        <div class="text-center">
                            <button style="background-color:#F9E9C7;" type="submit" class="btn save" name="envoi">تأكيد التسليم</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="myModalHorizontal2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel2" aria-hidden="true" style="font-size: 0.6em">
    <div class="modal-dialog">
         <div class="modal-content">
            <!-- Modal Header -->
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">&times;</span>
                    <span class="sr-only">Close</span>
                </button>
                <h5 class="modal-title" class="slds-text-heading_medium slds-hyphenate" id="myModalLabel2" >
                </h5>
            </div>

            <!-- Modal Body -->
            <div class="modal-body">
                <div class="text-center">
                    <h2 class="section-heading text-uppercase">إعادة مكثف</h2>
                </div>
                <form method="post" novalidate>
                    {% csrf_token %}                      
                    <div class="peer pX-40 " style="background-color: white">
                        <div class="row text-center">
                            <div class="col-md-12">
                                <div class="form-group ">
                                    {{ form2.concentrateur|as_crispy_field}}
                                </div>
                            </div>
                        </div>
                        <div class="text-center">
                            <button style="background-color:#F9E9C7;" type="submit" class="btn save" name="retour">تأكيد العملية</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>


<section class="page-section" id="concentrateur_demande">

    <div class="container">
        <div class="text-center">
            <br>
            <h2 class="section-heading text-uppercase">الطلبات</h2>
        </div>
          

        <button style="background-color:#F9E9C7;margin-bottom: 1%" type="button" class="btn" هd="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            الخيارات
        </button>
        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
            <a class="dropdown-item" data-column="1">الإسم و اللقب</a>
            <a class="dropdown-item" data-column="2">العمر</a>
            <a class="dropdown-item" data-column="3">رقم هاتف مرافق المريض</a>
            <a class="dropdown-item" data-column="4">البلدية</a>
            <a class="dropdown-item" data-column="5">العنوان</a>
            <a class="dropdown-item" data-column="6">الوزن</a>
            <a class="dropdown-item" data-column="8">الوصفة</a>
            <a class="dropdown-item" data-column="9">مكان تواجد المريض</a>
            <a class="dropdown-item" data-column="10">هل لدى المريض أمراض مزمنة ؟</a>
            <a class="dropdown-item" data-column="12">ملاحظات أخرى</a>
        </div>

        <button style="background-color:#F9E9C7;margin-bottom: 1%" type="button" class="btn" data-toggle="modal" data-target="#myModalHorizontal1" href="" >تسليم مكثف</button>
        <button style="background-color:#F9E9C7;margin-bottom: 1%" type="button" class="btn" data-toggle="modal" data-target="#myModalHorizontal2" href="" >إعادة مكثف</button>

        <table id="dataTable1" class="table table-striped table-bordered" cellspacing="0" width="100%">
            <thead style="color:black" >
                <tr>
                    <th>رقم بطاقة التعريف</th>
                    <th>الإسم و اللقب</th>
                    <th>العمر</th>
                    <th>رقم هاتف مرافق المريض</th>                      
                    <th>البلدية</th>
                    <th>العنوان</th>
                    <th>الوزن</th>
                    <th>نسبة الأكسجين في الدم</th>
                    <th>الوصفة</th>
                    <th>مكان تواجد المريض</th>
        	    <th>هل لدى المريض أمراض مزمنة ؟</th>
        	    <th>تم معالجة الطلب</th>
        	    <th>ملاحظات أخرى</th>
                </tr>
            </thead>
                    
            <tbody>
                {% for i in demande%}
                    <tr>
                        <td>{{ i.NCI }}</td>       
                        <td>{{ i.nomPrenom }}</td>
                        <td>{{ i.Age }}</td>
                        <td>{{ i.numeroTel }}</td>
                        <td> {{ i.get_commune_display }}</td> 
                        <td> {{ i.adresse }}</td>
                        <td> {{ i.poids }}</td>
                        <td> {{ i.get_oxygene_display }}</td>
                        <td> {{ i.get_ordonnance_display }}</td>
                        <td> {{ i.get_endroit_display }}</td>
                        <td> {{ i.get_maladieChronique_display }}</td> 
                        <td> {{ i.get_traite_display }}</td>
                        <td> {{ i.autre }}</td>
                    </tr>
                {% endfor %}

            </tbody>
        </table>
    </div>
</section>

{% endblock content %}
